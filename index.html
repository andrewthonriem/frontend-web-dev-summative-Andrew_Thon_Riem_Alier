<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Life Planner - Organize Your Student Life</title>
    <meta name="description" content="A responsive campus life planner to manage tasks, events, and activities">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header role="banner" class="header">
        <div class="container">
            <h1>Campus Life Planner</h1>
            <nav role="navigation" aria-label="Main navigation">
                <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu">
                    <span class="hamburger"></span>
                    <span class="sr-only">Menu</span>
                </button>
                <ul id="nav-menu" class="nav-menu">
                    <li><a href="#about" class="nav-link">About</a></li>
                    <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
                    <li><a href="#tasks" class="nav-link">Tasks</a></li>
                    <li><a href="#add-task" class="nav-link">Add Task</a></li>
                    <li><a href="#settings" class="nav-link">Settings</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content" role="main">
        <!-- About Section -->
        <section id="about" class="section" aria-labelledby="about-heading">
            <div class="container">
                <h2 id="about-heading">About Campus Life Planner</h2>
                <div class="about-content">
                    <p>This is an application that will help you as a student to stay organized and manage your campus activities, assignments, and events with this accessible planner designed for students.</p>
                    <div class="contact-info">
                        <h3>Contact Developer</h3>
                        <ul>
                            <li>GitHub: <a href="https://github.com/andrewthon" target="_blank">andrewthon</a></li>
                            <li>Email: <a href="mailto:andrew@gmail.com">andrew@gmail.com</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section" aria-labelledby="dashboard-heading">
            <div class="container">
                <h2 id="dashboard-heading">Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Tasks</h3>
                        <span id="total-tasks" class="stat-number">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Total Duration</h3>
                        <span id="total-duration" class="stat-number">0 min</span>
                    </div>
                    <div class="stat-card">
                        <h3>Top Tag</h3>
                        <span id="top-tag" class="stat-number">-</span>
                    </div>
                    <div class="stat-card">
                        <h3>This Week</h3>
                        <span id="week-tasks" class="stat-number">0</span>
                    </div>
                </div>
                
                <div class="cap-section">
                    <h3>Daily Time Cap</h3>
                    <div class="cap-display">
                        <div class="cap-bar">
                            <div id="cap-progress" class="cap-progress" role="progressbar" 
                                 aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <span id="cap-text" class="cap-text">0/0 min</span>
                    </div>
                    <div id="cap-message" aria-live="polite" class="cap-message"></div>
                </div>

                <div class="chart-section">
                    <h3>Last 7 Days Activity</h3>
                    <div id="activity-chart" class="activity-chart" role="img" aria-label="Bar chart showing task activity over the last 7 days">
                        <!-- Chart bars will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Tasks Section -->
        <section id="tasks" class="section" aria-labelledby="tasks-heading">
            <div class="container">
                <div class="section-header">
                    <h2 id="tasks-heading">Tasks & Events</h2>
                    <div class="controls">
                        <div class="search-container">
                            <label for="search-input" class="sr-only">Search tasks</label>
                            <input type="text" id="search-input" placeholder="Search with regex..." 
                                   aria-describedby="search-help">
                            <button id="case-toggle" class="btn btn-secondary" aria-pressed="false">
                                Case Sensitive
                            </button>
                        </div>
                        <div class="sort-container">
                            <label for="sort-select" class="sr-only">Sort tasks by</label>
                            <select id="sort-select" aria-label="Sort tasks">
                                <option value="date-desc">Date (Newest)</option>
                                <option value="date-asc">Date (Oldest)</option>
                                <option value="title-asc">Title (A-Z)</option>
                                <option value="title-desc">Title (Z-A)</option>
                                <option value="duration-desc">Duration (High-Low)</option>
                                <option value="duration-asc">Duration (Low-High)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div id="search-help" class="help-text" aria-live="polite">
                    Type a regex pattern to search. Invalid patterns will be ignored.
                </div>

                <div id="tasks-container" role="region" aria-live="polite">
                    <!-- Tasks will be rendered here -->
                </div>
            </div>
        </section>

        <!-- Add Task Section -->
        <section id="add-task" class="section" aria-labelledby="add-task-heading">
            <div class="container">
                <h2 id="add-task-heading">Add New Task/Event</h2>
                <form id="task-form" class="task-form" novalidate>
                    <div class="form-group">
                        <label for="title">Title *</label>
                        <input type="text" id="title" name="title" required 
                               aria-describedby="title-help title-error">
                        <div id="title-help" class="help-text">No leading/trailing spaces, no double spaces</div>
                        <div id="title-error" class="error-text" aria-live="polite"></div>
                    </div>

                    <div class="form-group">
                        <label for="dueDate">Due Date *</label>
                        <input type="date" id="dueDate" name="dueDate" required 
                               aria-describedby="dueDate-error">
                        <div id="dueDate-error" class="error-text" aria-live="polite"></div>
                    </div>

                    <div class="form-group">
                        <label for="duration">Duration (minutes) *</label>
                        <input type="number" id="duration" name="duration" min="0" step="1" required 
                               aria-describedby="duration-help duration-error">
                        <div id="duration-help" class="help-text">Whole numbers only, no decimals</div>
                        <div id="duration-error" class="error-text" aria-live="polite"></div>
                    </div>

                    <div class="form-group">
                        <label for="tag">Tag *</label>
                        <input type="text" id="tag" name="tag" required 
                               aria-describedby="tag-help tag-error">
                        <div id="tag-help" class="help-text">Letters, spaces, and hyphens only</div>
                        <div id="tag-error" class="error-text" aria-live="polite"></div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Add Task</button>
                        <button type="reset" class="btn btn-secondary">Clear Form</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section" aria-labelledby="settings-heading">
            <div class="container">
                <h2 id="settings-heading">Settings</h2>
                
                <div class="setting-group">
                    <h3>Daily Time Management</h3>
                    <div class="daily-cap-container">
                        <label for="daily-cap">Maximum minutes per day:</label>
                        <div class="daily-cap-input-wrapper">
                            <input type="number" id="daily-cap" min="0" step="30" value="480" 
                                   placeholder="Enter minutes">
                        </div>
                        <div class="daily-cap-units">
                            <span>Equivalent to:</span>
                            <span id="cap-hours-display">8 hours</span>
                        </div>
                        <div class="cap-value-display">
                            <span>Current setting:</span>
                            <span id="current-cap-value">480 minutes</span>
                        </div>
                    </div>
                    <div class="save-cap-wrapper">
                        <button id="save-cap" class="btn btn-primary">Save Cap</button>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Data Management</h3>
                    <div class="data-actions">
                        <button id="export-btn" class="btn btn-secondary">Export JSON</button>
                        <button id="import-btn" class="btn btn-secondary">Import JSON</button>
                        <button id="clear-data" class="btn btn-danger">Clear All Data</button>
                    </div>
                </div>

                <div id="settings-message" aria-live="polite" class="status-message"></div>
            </div>
        </section>
    </main>

    <footer role="contentinfo" class="footer">
        <div class="container">
            <p>&copy; 2025 Campus Life Planner. Built by Andrew Thon.</p>
        </div>
    </footer>

    <!-- Edit Task Modal -->
    <dialog id="edit-modal" class="modal" aria-labelledby="edit-modal-heading">
        <div class="modal-content">
            <h3 id="edit-modal-heading">Edit Task</h3>
            <form id="edit-form">
                <div class="form-group">
                    <label for="edit-title">Title</label>
                    <input type="text" id="edit-title" name="title" required>
                    <div id="edit-title-error" class="error-text"></div>
                </div>
                <div class="form-group">
                    <label for="edit-dueDate">Due Date</label>
                    <input type="date" id="edit-dueDate" name="dueDate" required>
                    <div id="edit-dueDate-error" class="error-text"></div>
                </div>
                <div class="form-group">
                    <label for="edit-duration">Duration (minutes)</label>
                    <input type="number" id="edit-duration" name="duration" min="0" required>
                    <div id="edit-duration-error" class="error-text"></div>
                </div>
                <div class="form-group">
                    <label for="edit-tag">Tag</label>
                    <input type="text" id="edit-tag" name="tag" required>
                    <div id="edit-tag-error" class="error-text"></div>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('edit-modal').close()">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </dialog>

    <script type="module" src="scripts/main.js"></script>
</body>
</html>